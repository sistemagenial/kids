import{j as e,r as c,u as T}from"./index-DkWMjuHb.js";import{H as E}from"./Header-DPb4Nwfq.js";import{P as k}from"./ProgressBar-DfiKX2Fs.js";import{W as I}from"./WhatsAppButton-B-vl6nZy.js";import{getAllVideos as V,updateUser as S}from"./database-DuIwEKn7.js";import"./Button-B4k9wJs-.js";function j({video:s,onWatch:l,isWatched:d,isCompleted:f,isFavorite:h,onToggleFavorite:u,onVideoClick:b}){const w=s.thumbnail_url||`https://readdy.ai/api/search-image?query=$%7BencodeURIComponent%28%60beautiful%20childrens%20bible%20video%20thumbnail%20for%20$%7Bvideo.title%7D%2C%20colorful%20and%20vibrant%2C%20child-friendly%20artwork%2C%20simple%20background%2C%20biblical%20scene%2C%20warm%20lighting%2C%20suitable%20for%20children%60%29%7D&width=400&height=300&seq=${s.id}&orientation=landscape`,i=()=>{b?b(s.id):l&&l(s)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-purple-200 group cursor-pointer relative",onClick:i,children:[e.jsx("div",{className:"absolute top-3 left-3 w-10 h-10 bg-gradient-to-br from-red-500 to-pink-500 text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg z-10",children:s.order_number||0}),e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:w,alt:s.title,className:"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-white/90 rounded-full p-4 shadow-lg transform scale-90 group-hover:scale-100 transition-transform duration-300",children:e.jsx("i",{className:"ri-play-fill text-3xl text-red-600"})})})]}),s.is_new&&e.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white text-center py-1 animate-pulse",children:e.jsx("span",{className:"text-xs font-bold tracking-wider",children:"NOVIDADE"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center",children:d||f?e.jsxs("div",{className:"flex items-center text-green-600 text-xs font-bold",children:[e.jsx("i",{className:"ri-check-circle-fill mr-1"}),e.jsx("span",{children:"ASSISTIDO"})]}):e.jsx("div",{className:"flex items-center text-red-500 text-xs font-bold",children:e.jsx("span",{children:"NÃO ASSISTIDO"})})}),u&&e.jsx("button",{onClick:o=>{o.stopPropagation(),u(s.id)},className:`p-2 rounded-full transition-all duration-300 hover:scale-110 ${h?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"}`,children:e.jsx("i",{className:`${h?"ri-heart-fill":"ri-heart-line"} text-2xl`})})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800 text-center line-clamp-2 group-hover:text-red-600 transition-colors",children:s.title})]})]})}function J(){const[s,l]=c.useState(null),[d,f]=c.useState([]),[h,u]=c.useState(""),[b,w]=c.useState(0),[i,o]=c.useState("all"),[D,_]=c.useState(!0),p=T();c.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("user");if(!a){p("/login");return}let r;try{r=JSON.parse(a)}catch(g){console.error("Failed to parse stored user data",g),p("/login");return}if(l(r),r.access_expires_at){const g=new Date(r.access_expires_at),n=new Date,F=g.getTime()-n.getTime(),O=Math.ceil(F/(1e3*60*60*24));w(Math.max(0,O))}const{data:x}=await V();x&&f(x)}catch(a){console.error("Erro ao carregar dados:",a)}finally{_(!1)}})()},[p]),c.useEffect(()=>{const t=a=>{if(a.detail.type==="videos"){if(!s)return;const r={...s,favorite_videos:a.detail.favorites};l(r),localStorage.setItem("user",JSON.stringify(r))}};return window.addEventListener("favoritesUpdated",t),()=>window.removeEventListener("favoritesUpdated",t)},[s]);const C=()=>{localStorage.removeItem("user"),p("/login")},y=async t=>{if(s)try{const a={...s.videos_progress,[t]:!0},r={...s,videos_progress:a};l(r),localStorage.setItem("user",JSON.stringify(r)),await S(s.id,{videos_progress:a})}catch(a){console.error("Erro ao atualizar progresso:",a)}finally{p(`/video/${t}`)}},v=async t=>{if(!s)return;const a=s.favorite_videos??[],x=a.includes(t)?a.filter(n=>n!==t):[...a,t],g={...s,favorite_videos:x};l(g),localStorage.setItem("user",JSON.stringify(g));try{const{data:n}=await S(s.id,{favorite_videos:x});n&&(l(n),localStorage.setItem("user",JSON.stringify(n)))}catch(n){console.error("Erro ao atualizar favoritos:",n),l(s),localStorage.setItem("user",JSON.stringify(s))}},m=(()=>{let t=d.filter(a=>a.title.toLowerCase().includes(h.toLowerCase()));switch(i){case"watched":t=t.filter(a=>{var r;return(r=s==null?void 0:s.videos_progress)==null?void 0:r[a.id]});break;case"unwatched":t=t.filter(a=>{var r;return!((r=s==null?void 0:s.videos_progress)!=null&&r[a.id])});break;case"new":t=t.filter(a=>a.is_new);break;case"favorites":t=t.filter(a=>{var r;return(r=s==null?void 0:s.favorite_videos)==null?void 0:r.includes(a.id)});break;case"old_testament":t=t.filter(a=>a.testament==="old");break;case"new_testament":t=t.filter(a=>a.testament==="new");break}return t})(),N=Object.entries((s==null?void 0:s.videos_progress)??{}).filter(([t,a])=>{const r=d.some(x=>x.id===t);return a&&r}).length;return s?D?e.jsxs("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 25%, #10b981 50%, #ec4899 75%, #3b82f6 100%)",backgroundSize:"400% 400%",animation:"gradientShift 25s ease infinite"},children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-white mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-white drop-shadow-lg",style:{fontFamily:"Pacifico, serif"},children:"Carregando vídeos..."}),e.jsx("p",{className:"text-white/80 mt-2",children:"Sincronizando com o banco de dados"})]}),e.jsx("style",{children:`
          @keyframes gradientShift {
            0%   { background-position: 0% 50%; }
            25%  { background-position: 25% 50%; }
            50%  { background-position: 50% 50%; }
            75%  { background-position: 75% 50%; }
            100% { background-position: 100% 50%; }
          }
        `})]}):e.jsxs("div",{className:"min-h-screen relative overflow-hidden",style:{background:"linear-gradient(135deg, #3b82f6 0%, #8b5cf6 25%, #10b981 50%, #ec4899 75%, #3b82f6 100%)",backgroundSize:"400% 400%",animation:"gradientShift 25s ease infinite"},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-10 left-10 w-12 h-12 md:w-20 md:h-20 bg-yellow-300/20 rounded-full animate-bounce",style:{animationDelay:"0s",animationDuration:"3s"}}),e.jsx("div",{className:"absolute top-32 right-20 w-10 h-10 md:w-16 md:h-16 bg-pink-300/20 rounded-full animate-bounce",style:{animationDelay:"1s",animationDuration:"4s"}}),e.jsx("div",{className:"absolute bottom-20 left-32 w-16 h-16 md:w-24 md:h-24 bg-blue-300/20 rounded-full animate-bounce",style:{animationDelay:"2s",animationDuration:"5s"}}),e.jsx("div",{className:"absolute bottom-40 right-10 w-8 h-8 md:w-12 md:h-12 bg-green-300/20 rounded-full animate-bounce",style:{animationDelay:"0.5s",animationDuration:"3.5s"}}),e.jsx("div",{className:"absolute top-1/2 left-20 w-6 h-6 md:w-8 md:h-8 bg-purple-300/20 rounded-full animate-bounce",style:{animationDelay:"1.5s",animationDuration:"4.5s"}}),e.jsx("div",{className:"absolute top-1/3 right-1/4 w-10 h-10 md:w-14 md:h-14 bg-orange-300/20 rounded-full animate-bounce",style:{animationDelay:"2.5s",animationDuration:"3.8s"}}),e.jsx("div",{className:"absolute top-20 left-1/4 text-yellow-300/70 text-xl md:text-2xl animate-pulse",style:{animationDuration:"2s"},children:"⭐"}),e.jsx("div",{className:"absolute top-40 right-1/3 text-yellow-300/70 text-lg md:text-xl animate-pulse",style:{animationDuration:"3s"},children:"✨"}),e.jsx("div",{className:"absolute bottom-60 left-1/2 text-yellow-300/70 text-2xl md:text-3xl animate-pulse",style:{animationDuration:"2.5s"},children:"🌟"}),e.jsx("div",{className:"absolute top-60 left-20 text-yellow-300/70 text-base md:text-lg animate-pulse",style:{animationDuration:"4s"},children:"💫"}),e.jsx("div",{className:"absolute bottom-32 right-1/3 text-yellow-300/70 text-xl md:text-2xl animate-pulse",style:{animationDuration:"3.5s"},children:"⭐"}),e.jsx("div",{className:"absolute top-1/2 right-10 text-yellow-300/70 text-lg md:text-xl animate-pulse",style:{animationDuration:"2.8s"},children:"✨"})]}),e.jsx(E,{user:s,daysRemaining:b,onLogout:C}),e.jsxs("main",{className:"container mx-auto px-2 md:px-4 py-4 md:py-8 relative z-10",children:[e.jsxs("section",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4 drop-shadow-lg text-center md:text-left",style:{fontFamily:"Pacifico, serif"},children:"Vídeos Bíblicos! 🎬"}),e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 md:p-6 shadow-xl border-2 border-purple-200/50",children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx("div",{className:"w-3/4",children:e.jsx(k,{progress:N,total:d.length})}),e.jsxs("div",{className:"w-1/4 relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar vídeo...",value:h,onChange:t=>u(t.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-purple-300/50 rounded-xl focus:border-purple-500 focus:outline-none transition-all duration-300 text-sm bg-white/90 backdrop-blur-sm shadow-lg hover:shadow-xl"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-500 text-sm"})]})]}),e.jsxs("div",{className:"md:hidden space-y-4",children:[e.jsx(k,{progress:N,total:d.length}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar vídeo...",value:h,onChange:t=>u(t.target.value),className:"w-full pl-10 pr-4 py-2 border-2 border-purple-300/50 rounded-xl focus:border-purple-500 focus:outline-none transition-all duration-300 text-sm bg-white/90 backdrop-blur-sm shadow-lg hover:shadow-xl"}),e.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-500 text-sm"})]})]})]})]}),e.jsx("section",{className:"mb-6",children:e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-xl border-2 border-purple-200/50",children:e.jsxs("div",{className:"flex flex-col space-y-2 md:flex-row md:justify-center md:space-y-0 md:space-x-2 md:flex-wrap",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="all"?"bg-purple-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-list-check mr-1"})," TODOS"]}),e.jsxs("button",{onClick:()=>o("watched"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="watched"?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-play-circle-line mr-1"})," ASSISTIDOS"]}),e.jsxs("button",{onClick:()=>o("unwatched"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="unwatched"?"bg-red-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-play-circle-line mr-1"})," NÃO ASSISTIDOS"]}),e.jsxs("button",{onClick:()=>o("new"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="new"?"bg-orange-5 00 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-star-line mr-1"})," NOVIDADES"]}),e.jsxs("button",{onClick:()=>o("favorites"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="favorites"?"bg-pink-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-heart-line mr-1"})," FAVORITOS"]}),e.jsxs("button",{onClick:()=>o("old_testament"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="old_testament"?"bg-blue-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-book-2-line mr-1"})," ANTIGO TESTAMENTO"]}),e.jsxs("button",{onClick:()=>o("new_testament"),className:`px-3 py-2 rounded-lg font-medium transition-all duration-300 whitespace-nowrap text-sm ${i==="new_testament"?"bg-indigo-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx("i",{className:"ri-video-line mr-1"})," NOVO TESTAMENTO"]})]})})}),e.jsx("section",{children:d.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-8 shadow-xl border-2 border-purple-200/50 max-w-md mx-auto",children:[e.jsx("i",{className:"ri-video-line text-6xl text-purple-500 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",style:{fontFamily:"Pacifico, serif"},children:"Nenhum Vídeo Cadastrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"O administrador ainda não adicionou vídeos ao sistema. Entre em contato para mais informações."}),e.jsxs("button",{onClick:()=>window.open("https://wa.me/5511999999999?text=Olá! Não há vídeos cadastrados no sistema","_blank"),className:"bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-3 rounded-lg transition-all duration-300 whitespace-nowrap",children:[e.jsx("i",{className:"ri-whatsapp-line mr-2"}),"Falar com Suporte"]})]})}):e.jsxs(e.Fragment,{children:[m.filter(t=>!t.testament||t.testament!=="old"&&t.testament!=="new").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-white mb-4 text-center drop-shadow-lg",style:{fontFamily:"Pacifico, serif"},children:"🎬 Vídeos Bíblicos!"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:m.filter(t=>!t.testament||t.testament!=="old"&&t.testament!=="new").map(t=>{var a,r;return e.jsx(j,{video:{...t,order_number:t.order_number||0},isCompleted:((a=s==null?void 0:s.videos_progress)==null?void 0:a[t.id])??!1,onWatch:()=>y(t.id),isFavorite:((r=s==null?void 0:s.favorite_videos)==null?void 0:r.includes(t.id))??!1,onToggleFavorite:()=>v(t.id)},t.id)})})]}),m.filter(t=>t.testament==="old").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-white mb-4 text-center drop-shadow-lg",style:{fontFamily:"Pacifico, serif"},children:"📜 Antigo Testamento"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:m.filter(t=>t.testament==="old").map(t=>{var a,r;return e.jsx(j,{video:{...t,order_number:t.order_number||0},isCompleted:((a=s==null?void 0:s.videos_progress)==null?void 0:a[t.id])??!1,onWatch:()=>y(t.id),isFavorite:((r=s==null?void 0:s.favorite_videos)==null?void 0:r.includes(t.id))??!1,onToggleFavorite:()=>v(t.id)},t.id)})})]}),m.filter(t=>t.testament==="new").length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-white mb-4 text-center drop-shadow-lg",style:{fontFamily:"Pacifico, serif"},children:"✨ Novo Testamento"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:m.filter(t=>t.testament==="new").map(t=>{var a,r;return e.jsx(j,{video:{...t,order_number:t.order_number||0},isCompleted:((a=s==null?void 0:s.videos_progress)==null?void 0:a[t.id])??!1,onWatch:()=>y(t.id),isFavorite:((r=s==null?void 0:s.favorite_videos)==null?void 0:r.includes(t.id))??!1,onToggleFavorite:()=>v(t.id)},t.id)})})]}),m.length===0&&d.length>0&&e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-8 shadow-xl border-2 border-purple-200/50 max-w-md mx-auto",children:[e.jsx("i",{className:"ri-search-line text-6xl text-purple-500 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",style:{fontFamily:"Pacifico, serif"},children:"Nenhum Vídeo Encontrado"}),e.jsx("p",{className:"text-gray-600",children:"Nenhum vídeo encontrado para o filtro selecionado. Tente alterar os filtros ou busca."})]})})]})})]}),e.jsx("footer",{className:"relative z-10 p-4 text-center",children:e.jsxs("p",{className:"text-white/80 text-sm",children:["© ",new Date().getFullYear()," Profeta de Deus Kids - Desenvolvido com ❤️ para as crianças"]})}),e.jsx(I,{message:"Olá! Preciso de ajuda com os vídeos bíblicos"}),e.jsx("style",{children:`
        @keyframes gradientShift {
          0%   { background-position: 0% 50%; }
          25%  { background-position: 25% 50%; }
          50%  { background-position: 50% 50%; }
          75%  { background-position: 75% 50%; }
          100% { background-position: 100% 50%; }
        }
      `})]}):null}export{J as default};
